<tool id="scripture" name="Scripture" version="0.1">
    <description> ab initio transcriptome reconstruction from RNA-Seq reads</description>

    <command interpreter='java'>
    </command>

    <inputs>
        <param format="fasta" name="genomesq" type="data" label="Genome sequence" help="Genome sequence in FASTA format."/>
        <param format="bam,sam" name="alformat" type="data" label="Read alignment data" help="Alignment file in BAM, SAM or Alignment format."/>

        <conditional name="inputs">
		    <param name="paired_or_single" type="select" label="Paired or Single-end data?">
                <option value="paired">Paired</option>
                <option value="single">Single</option>
            </param>
            <when value="paired">
                <param name="library_type" type="select" label="Strand-specific Library Type" help="FR: RNA ligation sequencing method, RF: dUTP/UDG sequencing method.">
                    <option value="None">None</option>
                    <option value="FR">FR</option>
                    <option value="RF">RF</option>
                </param>
            </when>
            <when value="single">
                <param name="library_type" type="select" label="Strand-specific Library Type">
                    <option value="None">None</option>
                    <option value="F">F</option>
                    <option value="R">R</option>
                </param>
            </when>
        </conditional>
    	
		<conditional name="additional_params">
            <param name="use_additional" type="select" label="Use Additional Params?">
                <option value="no">No</option>
                <option value="yes">Yes</option>
            </param>
            <when value="no">
            </when>
            <when value="yes">            
				<param name="min_kmer_cov" type="integer" value="1" min="1" label="inchworm_min_kmer_cov" help="Minimum kmer coverage required by Inchworm for initial contig construction" />
				<param name="max_reads_per_graph" type="integer" value="20000000" min="10000" label="chrysalis_max_reads_per_graph" help="Maximum number of reads to be anchored within each transcript graph by Chrysalis" />
				
			
				<param name="bfly_opts" type="text" value="None" label="bfly_opts" help="Options to pass on to Butterfly" />
				<param name="bflyHeapSpaceMax" type="select" label="bflyHeapSpaceMax" help="Java heap space maximum value for Butterfly">
					<option value="1G">1G</option>
					<option value="2G">2G</option>
					<option value="4G" selected="true">4G</option>
					<option value="10G">10G</option>
					<option value="20G">20G</option>
				</param>

               <param name="min_contig_length" type="integer" value="200" min="1" label="Minimum Contig Length" help=""/>
            </when>
        </conditional>
    </inputs>
    <outputs>
        <data format="txt" name="scripture_log" label="${tool.name} on ${on_string}: log" />
        <data format="bed" name="assembled_transcripts" label="${tool.name} on ${on_string}: Assembled Transcripts" />
    </outputs>
    <tests>
    </tests>
    <help>
        Scripture_ is a de novo transcript assembler that uses RNA-seq data as input. 
        
        .. _Scripture: http://www.broadinstitute.org/software/scripture/
    </help>
</tool>
